<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Angela's Investment Thoughts</title>
  <meta name="description" content="Public equity ideas, earnings notes, and valuation frameworks." />
  <style>
    :root{
      --bg:#0b0f14;
      --card:#0f1620;
      --text:#e6edf3;
      --muted:#9fb0c0;
      --border:rgba(255,255,255,.08);
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --shadow: 0 14px 50px rgba(0,0,0,.35);
      --radius: 18px;
      --max: 1040px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    [data-theme="light"]{
      --bg:#f7f8fb;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#516072;
      --border:rgba(10,18,32,.10);
      --accent:#0284c7;
      --accent2:#6d28d9;
      --shadow: 0 12px 45px rgba(10,18,32,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:
        /* subtle chart grid */
        linear-gradient(to right, rgba(255,255,255,.045) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.045) 1px, transparent 1px),
        /* soft market-style glow accents */
        radial-gradient(1200px 600px at 15% -10%, rgba(125,211,252,.16), transparent 60%),
        radial-gradient(900px 500px at 95% 0%, rgba(167,139,250,.18), transparent 55%),
        var(--bg);
      background-size: 90px 90px, 90px 90px, auto, auto, auto;
      background-position: 0 0, 0 0, center, center, center;
      color:var(--text);
      line-height:1.6;
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:28px 18px 60px}
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(0,0,0,.28), rgba(0,0,0,0));
      padding:14px 0 8px;
    }
    [data-theme="light"] header{
      background: linear-gradient(to bottom, rgba(247,248,251,.85), rgba(247,248,251,0));
    }
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      padding:10px 12px; border:1px solid var(--border); border-radius:999px;
      background: rgba(255,255,255,.02);
    }
    .avatar{
      width:34px; height:34px; border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 10px 25px rgba(125,211,252,.18);
      flex:0 0 auto;
    }
    .brand h1{font-size:14px; margin:0}
    .brand p{margin:0; font-size:12px; color:var(--muted)}
    nav{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .chip{
      border:1px solid var(--border);
      background: rgba(255,255,255,.02);
      padding:9px 12px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
      transition:.15s transform, .15s border-color, .15s color;
    }
    .chip:hover{transform: translateY(-1px); border-color: rgba(125,211,252,.35); color:var(--text)}
    .chip.active{border-color: rgba(125,211,252,.55); color:var(--text)}
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      padding:9px 12px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      transition:.15s transform, .15s border-color;
      color:var(--text);
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(167,139,250,.45)}
    .hero{
      margin-top:18px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border-radius: var(--radius);
      padding:22px;
      box-shadow: var(--shadow);
    }
    .hero .row{
      display:flex; gap:18px; align-items:flex-start; justify-content:space-between;
      flex-wrap:wrap;
    }
    .hero h2{margin:0 0 6px; font-size:26px; letter-spacing:-.02em}
    .hero p{margin:0; color:var(--muted); max-width:70ch}
    .search{
      display:flex; gap:10px; align-items:center; flex:1 1 260px; justify-content:flex-end;
      min-width:260px;
    }
    .input{
      width:100%;
      border:1px solid var(--border);
      background: rgba(0,0,0,.15);
      color:var(--text);
      border-radius: 12px;
      padding:10px 12px;
      outline:none;
    }
    [data-theme="light"] .input{background: rgba(10,18,32,.04)}
    .input::placeholder{color: rgba(159,176,192,.7)}
    main{margin-top:18px}
    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns: 1fr}
      .search{justify-content:stretch}
    }
    .card{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
    }
    .post{
      padding:14px 0;
      border-bottom:1px dashed var(--border);
    }
    .post:last-child{border-bottom:none}
    .post h3{
      margin:0 0 6px;
      font-size:18px;
      letter-spacing:-.01em;
      cursor:pointer;
    }
    .meta{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      font-size:12px; color:var(--muted);
      font-family: var(--mono);
    }
    .tag{
      border:1px solid var(--border);
      padding:3px 8px;
      border-radius:999px;
      font-family: var(--mono);
      font-size:12px;
      color:var(--muted);
      cursor:pointer;
      transition:.15s border-color, .15s color, .15s transform;
      display:inline-block;
    }
    .tag:hover{transform: translateY(-1px); border-color: rgba(125,211,252,.45); color:var(--text)}
    .excerpt{margin:10px 0 0; color:var(--muted)}
    .sidebar h4{margin:0 0 10px; font-size:14px; color:var(--text)}
    .list{display:flex; flex-direction:column; gap:10px}
    .linkrow{
      display:flex; justify-content:space-between; align-items:center;
      gap:10px;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius: 14px;
      background: rgba(255,255,255,.02);
      cursor:pointer;
      transition:.15s transform, .15s border-color;
      color:var(--muted);
    }
    .linkrow:hover{transform: translateY(-1px); border-color: rgba(167,139,250,.45); color:var(--text)}
    .kbd{font-family:var(--mono); font-size:12px; opacity:.8}
    .footer{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;
      display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;
      font-family: var(--mono);
    }
    /* Article view */
    .article h1{margin:0 0 8px; font-size:28px; letter-spacing:-.02em}
    .article .content{margin-top:14px; color:var(--text)}
    .article .content p{margin:12px 0; color: rgba(230,237,243,.92)}
    .article .content img{
      max-width:100%;
      height:auto;
      border-radius:14px;
      border:1px solid var(--border);
      box-shadow: 0 12px 35px rgba(0,0,0,.25);
      display:block;
      margin:14px 0;
    }
    .article .content figure{margin:14px 0}
    .article .content figcaption{color:var(--muted); font-size:13px; margin-top:8px}
    [data-theme="light"] .article .content p{color: rgba(11,18,32,.92)}
    [data-theme="light"] .article .content img{box-shadow: 0 10px 25px rgba(10,18,32,.10)}
    .back{
      display:inline-flex; align-items:center; gap:8px;
      cursor:pointer; color:var(--muted);
      font-family:var(--mono); font-size:12px;
      margin-bottom:12px;
    }
    .back:hover{color:var(--text)}
    code, pre{
      font-family: var(--mono);
      font-size: 13px;
    }
    pre{
      padding:12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.18);
      overflow:auto;
    }
    [data-theme="light"] pre{background: rgba(10,18,32,.04)}

    [data-theme="light"] body{
      background:
        linear-gradient(to right, rgba(10,18,32,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(10,18,32,.06) 1px, transparent 1px),
        radial-gradient(1200px 600px at 15% -10%, rgba(2,132,199,.10), transparent 60%),
        radial-gradient(900px 500px at 95% 0%, rgba(109,40,217,.10), transparent 55%),
        var(--bg);
      background-size: 90px 90px, 90px 90px, auto, auto, auto;
      background-position: 0 0, 0 0, center, center, center;
    }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="topbar">
        <a class="brand" href="#" id="homeBtn" aria-label="Go home">
          <div class="avatar" aria-hidden="true"></div>
          <div>
            <h1 id="siteName">Angela</h1>
            <p id="siteTagline">Public equity ideas, earnings notes, and valuation frameworks.</p>
          </div>
        </a>

        <nav>
          <div class="chip active" data-filter="all">All</div>
          <div class="chip" data-filter="ideas">Stock Ideas</div>
          <div class="chip" data-filter="earnings">Earnings</div>
          <div class="chip" data-filter="frameworks">Frameworks</div>
          <div class="chip" data-filter="watchlist">Watchlist</div>
          <button class="btn" id="themeToggle" title="Toggle theme">☾ / ☀︎</button>
        </nav>
      </div>
    </div>
  </header>

  <div class="container">
    <section class="hero">
      <div class="row">
        <div>
          <h2 id="heroTitle">Public equity research notes + investment ideas.</h2>
          <p id="heroDesc">
            Search for ticker name
          </p>
        </div>
        <div class="search">
          <input class="input" id="searchInput" placeholder="Search by ticker, company, thesis, catalyst…" />
        </div>
      </div>
    </section>

    <main class="grid">
      <!-- Feed / Article -->
      <section class="card" id="mainPanel" aria-live="polite"></section>

      <!-- Sidebar -->
      <aside class="card sidebar">
        <h4>Featured ideas</h4>
        <div class="list" id="featuredList"></div>

        <div style="height:14px"></div>

        <h4>About</h4>
        <p style="margin:0; color:var(--muted)">
          Hi — I’m <span id="aboutName">Angela</span>. I’m a student at Northwestern University majoring in Mathematics and Economics and minoring in Computer Science. I’m especially interested in public market investing, so here are some of my investment thoughts and models. Nothing here is financial advice.
        </p>

        <div style="height:14px"></div>

        <h4>Links</h4>
        <div class="list">
          <a class="linkrow" href="https://github.com/angelaweng0903" target="_blank" rel="noreferrer">
            <span>GitHub</span><span class="kbd">↗</span>
          </a>
          <a class="linkrow" href="https://www.linkedin.com/in/angela-d-weng/" target="_blank" rel="noreferrer">
            <span>LinkedIn</span><span class="kbd">↗</span>
          </a>
          <a class="linkrow" href="mailto:angelaweng17@gmail.com">
            <span>Email</span><span class="kbd">↗</span>
          </a>
        </div>
      </aside>
    </main>

    <div class="footer">
      <span>© <span id="year"></span> <span id="footerName">Angela</span></span>
      <span> • Plain HTML/CSS/JS</span>
    </div>
  </div>

  <script>
    // ====== Customize quickly here ======
    const PROFILE = {
      name: "Angela",
      tagline: "Public equity ideas, earnings notes, and valuation frameworks.",
      heroTitle: "Public equity research notes + investment ideas.",
      heroDesc: "Search by ticker name"
    };

    // ====== Posts live in separate files (GitHub Pages friendly) ======
    // Create `posts/index.json` with metadata, and `posts/<id>.html` (or any path) with the post HTML.
    // This keeps the homepage lightweight and makes writing/editing posts easier.

    let POSTS = [];

    async function loadPosts(){
      // cache-bust so GitHub Pages updates show up quickly
      const v = String(Date.now());
      try{
        const res = await fetch(`posts/index.json?v=${v}`, { cache: "no-store" });
        if(!res.ok) throw new Error(`Failed to load posts/index.json (${res.status})`);
        const data = await res.json();
        if(!Array.isArray(data)) throw new Error("posts/index.json must be an array");
        // Minimal validation + defaults
        POSTS = data.map(p => ({
          id: p.id,
          title: p.title,
          date: p.date,
          category: p.category || "ideas",
          tags: Array.isArray(p.tags) ? p.tags : [],
          featured: !!p.featured,
          excerpt: p.excerpt || "",
          searchText: p.searchText || "",
          // content can be inline OR loaded from a file
          content: p.content || null,
          contentPath: p.contentPath || null
        })).filter(p => p.id && p.title && p.date);
      }catch(err){
        console.warn("Falling back to empty posts list. Error:", err);
        POSTS = [];
      }
    }

    async function ensurePostContent(post){
      // If content is inline, nothing to do.
      if(post.content) return;
      if(!post.contentPath) { post.content = `<p style=\"color:var(--muted)\">No content file found for this post.</p>`; return; }

      const v = String(Date.now());
      try{
        const res = await fetch(`${post.contentPath}?v=${v}`, { cache: "no-store" });
        if(!res.ok) throw new Error(`Failed to load ${post.contentPath} (${res.status})`);
        // Treat as HTML snippet
        post.content = await res.text();
      }catch(err){
        console.warn("Failed to load post content:", err);
        post.content = `<p style=\"color:var(--muted)\">Could not load this post. Check that <code>${escapeHtml(post.contentPath)}</code> exists in your repo.</p>`;
      }
    }

    // ====== State ======
    const state = {
      filter: "all",
      query: "",
      view: "feed", // "feed" | "article"
      activePostId: null
    };

    // ====== Helpers ======
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const formatDate = (iso) => {
      const d = new Date(iso + "T00:00:00");
      return d.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"2-digit" });
    };
    const matches = (post) => {
      const q = state.query.trim().toLowerCase();
      const inFilter = state.filter === "all" ? true : post.category === state.filter;
      if (!inFilter) return false;
      if (!q) return true;
      const hay = [
        post.title,
        post.excerpt || "",
        post.searchText || "",
        (post.tags || []).join(" "),
        (post.content || "").replace(/<[^>]*>/g, " ")
      ].join(" ").toLowerCase();
      return hay.includes(q);
    };
    const sortedPosts = () =>
      [...POSTS].sort((a,b)=> new Date(b.date) - new Date(a.date));

    // ====== Render ======
    function renderFeatured(){
      const el = $("#featuredList");
      const featured = sortedPosts().filter(p => p.featured).slice(0, 5);
      el.innerHTML = featured.map(p => `
        <div class="linkrow" role="button" tabindex="0" onclick="openPost('${p.id}')">
          <div style="display:flex; flex-direction:column; gap:3px">
            <span style="color:var(--text)">${escapeHtml(p.title)}</span>
            <span class="kbd">${formatDate(p.date)} • ${p.category}</span>
          </div>
          <span class="kbd">Enter</span>
        </div>
      `).join("") || `<div class="linkrow" style="opacity:.7">No featured posts yet.</div>`;
    }

    function renderFeed(){
      const list = sortedPosts().filter(matches);
      const main = $("#mainPanel");

      main.innerHTML = `
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap">
          <div>
            <h3 style="margin:0; font-size:16px">Latest posts</h3>
            <div class="meta" style="margin-top:6px">
              <span>${list.length} post${list.length===1?"":"s"}</span>
              <span>•</span>
              <span>Filter: ${state.filter}</span>
              ${state.query ? `<span>•</span><span>Query: "${escapeHtml(state.query)}"</span>` : ``}
            </div>
          </div>
          <div class="meta">
            <span class="kbd">Tip: search tickers or click tags</span>
          </div>
        </div>

        <div style="height:10px"></div>

        ${list.map(p => `
          <article class="post">
            <h3 onclick="openPost('${p.id}')">${escapeHtml(p.title)}</h3>
            <div class="meta">
              <span>${formatDate(p.date)}</span>
              <span>•</span>
              <span>${p.category}</span>
              <span>•</span>
              <span>${(p.tags||[]).map(t=>`<span class="tag" onclick="event.stopPropagation(); setQueryTag('${t}')">#${escapeHtml(t)}</span>`).join(" ")}</span>
            </div>
            <p class="excerpt">${escapeHtml(p.excerpt || "")}</p>
          </article>
        `).join("") || `
          <div style="padding:18px 0; color:var(--muted)">
            No posts match your search. Try clearing the filter or query.
          </div>
        `}
      `;
    }

    async function renderArticle(postId){
      const p = POSTS.find(x => x.id === postId);
      const main = $("#mainPanel");
      if(!p){ state.view = "feed"; state.activePostId = null; render(); return; }

      // show a quick loading state
      main.innerHTML = `
        <div class="article">
          <div class="back" onclick="goHome()">← Back to posts</div>
          <h1>${escapeHtml(p.title)}</h1>
          <div class="meta"><span>Loading…</span></div>
          <div class="content" style="color:var(--muted); margin-top:12px">Fetching post content…</div>
        </div>
      `;

      await ensurePostContent(p);

      main.innerHTML = `
        <div class="article">
          <div class="back" onclick="goHome()">← Back to posts</div>
          <h1>${escapeHtml(p.title)}</h1>
          <div class="meta">
            <span>${formatDate(p.date)}</span>
            <span>•</span>
            <span>${p.category}</span>
            <span>•</span>
            <span>${(p.tags||[]).map(t=>`<span class="tag" onclick="setQueryTag('${t}')">#${escapeHtml(t)}</span>`).join(" ")}</span>
          </div>
          <div class="content">${p.content || ""}</div>
        </div>
      `;
    }

    async function render(){
      renderFeatured();
      if(state.view === "article") await renderArticle(state.activePostId);
      else renderFeed();
      syncChips();
      syncUrl();
    }

    // ====== Actions ======
    function openPost(id){
      state.view = "article";
      state.activePostId = id;
      render();
      window.scrollTo({top: 0, behavior: "smooth"});
    }
    function goHome(){
      state.view = "feed";
      state.activePostId = null;
      render();
    }
    function setFilter(f){
      state.filter = f;
      state.view = "feed";
      state.activePostId = null;
      render();
    }
    function setQuery(q){
      state.query = q;
      state.view = "feed";
      state.activePostId = null;
      render();
    }
    function setQueryTag(tag){
      $("#searchInput").value = tag;
      setQuery(tag);
    }

    // ====== Theme ======
    function getTheme(){
      return localStorage.getItem("theme") || (window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "dark");
    }
    function setTheme(theme){
      document.documentElement.setAttribute("data-theme", theme === "light" ? "light" : "dark");
      localStorage.setItem("theme", theme);
    }

    // ====== URL state (optional) ======
    function syncUrl(){
      const params = new URLSearchParams();
      if(state.filter && state.filter !== "all") params.set("c", state.filter);
      if(state.query) params.set("q", state.query);
      if(state.view === "article" && state.activePostId) params.set("p", state.activePostId);
      const url = window.location.pathname + (params.toString() ? `?${params}` : "");
      window.history.replaceState({}, "", url);
    }
    function loadFromUrl(){
      const params = new URLSearchParams(window.location.search);
      const c = params.get("c");
      const q = params.get("q");
      const p = params.get("p");
      if(c) state.filter = c;
      if(q) state.query = q;
      if(p){ state.view = "article"; state.activePostId = p; }
      if(q) $("#searchInput").value = q;
    }

    // ====== UI sync ======
    function syncChips(){
      $$(".chip").forEach(ch => ch.classList.toggle("active", ch.dataset.filter === state.filter));
    }

    // ====== Safety: basic HTML escaping ======
    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, (m) => ({
        "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
      }[m]));
    }

    // ====== Init ======
    async function init(){
      // set profile text
      $("#siteName").textContent = PROFILE.name;
      $("#footerName").textContent = PROFILE.name;
      $("#aboutName").textContent = PROFILE.name;
      $("#siteTagline").textContent = PROFILE.tagline;
      $("#heroTitle").textContent = PROFILE.heroTitle;
      $("#heroDesc").textContent = PROFILE.heroDesc;
      $("#year").textContent = new Date().getFullYear();

      // theme
      setTheme(getTheme());
      $("#themeToggle").addEventListener("click", () => {
        const next = (document.documentElement.getAttribute("data-theme") === "light") ? "dark" : "light";
        setTheme(next);
      });

      // filter chips
      $$(".chip").forEach(ch => ch.addEventListener("click", () => setFilter(ch.dataset.filter)));

      // search
      $("#searchInput").addEventListener("input", (e) => setQuery(e.target.value));

      // home button
      $("#homeBtn").addEventListener("click", (e) => { e.preventDefault(); goHome(); });

      // load posts manifest from /posts/index.json
      await loadPosts();

      loadFromUrl();
      render();

      // keyboard: "/" focuses search
      window.addEventListener("keydown", (e) => {
        if(e.key === "/" && document.activeElement !== $("#searchInput")){
          e.preventDefault();
          $("#searchInput").focus();
        }
        if(e.key === "Escape"){
          if(state.view === "article") goHome();
          else { $("#searchInput").value = ""; setQuery(""); }
        }
      });
    }
    init();

    // Expose minimal functions for inline handlers
    window.openPost = openPost;
    window.goHome = goHome;
    window.setQueryTag = setQueryTag;
    window.setFilter = setFilter;
  </script>
</body>
</html>